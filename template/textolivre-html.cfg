\Preamble{xhtml}

% Fix for Abstract environment - start
% Configure the abtract environment to produce the <section> element
\ConfigureEnv{abstract}
{\ifvmode\IgnorePar\fi\EndP\HCode{<section role="doc-abstract" class="abstract">\Hnewline}} 
{\ifvmode\IgnorePar\fi\EndP\HCode{</section>}}{}{}
% we want to get rid of the center environment used around the abstract title
% we also introduce a <h3> element for the title
\newenvironment{dummyabstracttitle}{\ifvmode\IgnorePar\fi\EndP\HCode{<h3 class="abstracttitle">}}{\HCode{</h3>}\par\noindent}
% use our dummy environment to insert tags around the abstract title
\renewcommand{\absnamepos}{dummyabstracttitle}
% get rid of all extra <span> elements introduced by smaller font size
\renewcommand{\abstracttextfont}{\normalfont}
\renewcommand{\abstractnamefont}{\normalfont}
% style the abstract
\Css{.abstract{margin:1em;font-size:0.9rem;}}
\Css{.abstracttitle{text-align:center;margin-bottom:1em;}}
% Fix for Abstract environment - end

% Redefines \rotatebox to just print the text, without any rotation.
\renewcommand\rotatebox[3][]{#3}
\Css{\#TBL-1 \#TBL-1-5g{border:none;}}
\Css{\#TBL-1 \#TBL-1-1g{border:none;}}

\begin{document}

% Removing div element surrounding tables and figures.
\ConfigureEnv{tabular}
    {\HCode{}}{\HCode{}}{}{}
\ConfigureEnv{figure} 
    {\HCode{}}{\HCode{}}{}{}
    
% Convert tables into images.
%\ConfigureEnv{table}
%    {\Picture*{}}{\EndPicture}{}{}

% Always ignore \hline commands. Tables will rather be styled using CSS.
\Configure{hline}{\HCode{}}
% This one removes the rulers. Taking a look at html4.4ht should make 
% clear what has been changed.
\Configure{float}
   {\ifOption{refcaption}{}{\csname par\endcsname\ShowPar \leavevmode}}
   {\HCode{}}
{\ifvmode \IgnorePar \fi\EndP \HCode{}\csname par\endcsname\ShowPar}

\EndPreamble
